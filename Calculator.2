import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Calculator extends JFrame{
	private JButton jbt1 = new JButton(" 1 ");
	private JButton jbt2 = new JButton("2");
	private JButton jbt3 = new JButton("3");
	private JButton jbt4 = new JButton("4");
	private JButton jbt5 = new JButton("5");
	private JButton jbt6 = new JButton("6");
	private JButton jbt7 = new JButton("7");
	private JButton jbt8 = new JButton("8");
	private JButton jbt9 = new JButton("9");
	private JButton jbt0 = new JButton("0");
	private JButton jbtPoint = new JButton(".");
	private JButton jbtPlus = new JButton("+");
	private JButton jbtMinus = new JButton("-");
	private JButton jbtMultiple = new JButton("ร");
	private JButton jbtDevide = new JButton("รท");
	private JButton jbtEqual = new JButton("=");
	private JButton jbtClear = new JButton("C");
	private JLabel jlbStrValue1 = new JLabel();
	private JTextField jtfPrint = new JTextField();

	public Calculator(){
		JPanel p1 = new JPanel(new BorderLayout());
		jtfPrint.setEditable(false);
		jtfPrint.setHorizontalAlignment(JTextField.RIGHT);
		p1.add(jtfPrint);

		JPanel p2 = new JPanel(new GridLayout(6, 6));
		p2.add(jbt1);
		p2.add(jbt2);
		p2.add(jbt3);
		p2.add(jbt4);
		p2.add(jbt5);
		p2.add(jbt6);
		p2.add(jbt7);
		p2.add(jbt8);
		p2.add(jbt9);
		p2.add(jbt0);
		p2.add(jbtPlus);
		p2.add(jbtMinus);
		p2.add(jbtMultiple);
		p2.add(jbtDevide);
		p2.add(jbtEqual);
		p2.add(jbtPoint);
		p2.add(jbtClear);
		getContentPane().add(p1, BorderLayout.NORTH);
		getContentPane().add(p2, BorderLayout.SOUTH);

		jbt1.addActionListener(new ButtonListener());
	    jbt2.addActionListener(new ButtonListener());
	    jbt3.addActionListener(new ButtonListener());
	    jbt4.addActionListener(new ButtonListener());
	    jbt5.addActionListener(new ButtonListener());
	    jbt6.addActionListener(new ButtonListener());
	    jbt7.addActionListener(new ButtonListener());
	    jbt8.addActionListener(new ButtonListener());
	    jbt9.addActionListener(new ButtonListener());
	    jbt0.addActionListener(new ButtonListener());
	    jbtPlus.addActionListener(new ButtonListener());
	    jbtMinus.addActionListener(new ButtonListener());
	    jbtMultiple.addActionListener(new ButtonListener());
	    jbtDevide.addActionListener(new ButtonListener());
	    jbtPoint.addActionListener(new ButtonListener());
		jbtEqual.addActionListener(new ButtonListener());
	    jbtClear.addActionListener(new ButtonListener());
	}

	String StrValue1 = "";
	String StrValue2 = "";
	String StrResult="";
	double dbValue1=0.0;
	double dbValue2=0.0;
	double dbResult=0.0;
	int iOperation=0;
	boolean bValue1ready = false;
	boolean bValue2ready = false;

	private class ButtonListener implements ActionListener{
		@Override
		public void actionPerformed(ActionEvent e){
			if(e.getSource() == jbtClear){
				bValue1ready=false;
				bValue2ready=false;
				StrValue1="";
				StrValue2="";
				StrResult="0";
				iOperation=0;
				dbValue1=0.0;
				dbValue2=0.0;
				dbResult=0.0;
				jtfPrint.setText(StrResult);
			}
			else if(e.getSource() == jbt1){
				if(bValue1ready==false){
					if(jtfPrint.getText().equals("0")){
						StrValue1 = "";
					}
					StrValue1 += "1";
					jtfPrint.setText(StrValue1);
				}
				else{
					if(jtfPrint.getText().equals("0")){
						StrValue2 = "";
					}
					StrValue2 += "1";
					jtfPrint.setText(StrValue2);
				}
			}
			else if(e.getSource() == jbt2){
				if(bValue1ready==false){
					if(jtfPrint.getText().equals("0")){
						StrValue1 = "";
					}
					StrValue1 += "2";
					jtfPrint.setText(StrValue1);
				}
				else{
					if(jtfPrint.getText().equals("0")){
						StrValue2 = "";
					}
					StrValue2 += "2";
					jtfPrint.setText(StrValue2);
				}
			}
			else if(e.getSource() == jbt3){
				if(bValue1ready==false){
					if(jtfPrint.getText().equals("0")){
						StrValue1 = "";
					}
					StrValue1 += "3";
					jtfPrint.setText(StrValue1);
				}
				else{
					if(jtfPrint.getText().equals("0")){
						StrValue2 = "";
					}
					StrValue2 += "3";
					jtfPrint.setText(StrValue2);
				}
			}
			else if(e.getSource() == jbt4){
				if(bValue1ready==false){
					if(jtfPrint.getText().equals("0")){
						StrValue1 = "";
					}
					StrValue1 += "4";
					jtfPrint.setText(StrValue1);
				}
				else{
					if(jtfPrint.getText().equals("0")){
						StrValue2 = "";
					}
					StrValue2 += "4";
					jtfPrint.setText(StrValue2);
				}
			}
			else if(e.getSource() == jbt5){
				if(bValue1ready==false){
					if(jtfPrint.getText().equals("0")){
						StrValue1 = "";
					}
					StrValue1 += "5";
					jtfPrint.setText(StrValue1);
				}
				else{
					if(jtfPrint.getText().equals("0")){
						StrValue2 = "";
					}
					StrValue2 += "5";
					jtfPrint.setText(StrValue2);
				}
			}
			else if(e.getSource() == jbt6){
				if(bValue1ready==false){
					if(jtfPrint.getText().equals("0")){
						StrValue1 = "";
					}
					StrValue1 += "6";
					jtfPrint.setText(StrValue1);
				}
				else{
					if(jtfPrint.getText().equals("0")){
						StrValue2 = "";
					}
					StrValue2 += "6";
					jtfPrint.setText(StrValue2);
				}
			}
			else if(e.getSource() == jbt7){
				if(bValue1ready==false){
					if(jtfPrint.getText().equals("0")){
						StrValue1 = "";
					}
					StrValue1 += "7";
					jtfPrint.setText(StrValue1);
				}
				else{
					if(jtfPrint.getText().equals("0")){
						StrValue2 = "";
					}
					StrValue2 += "7";
					jtfPrint.setText(StrValue2);
				}
			}
			else if(e.getSource() == jbt8){
				if(bValue1ready==false){
					if(jtfPrint.getText().equals("0")){
						StrValue1 = "";
					}
					StrValue1 += "8";
					jtfPrint.setText(StrValue1);
				}
				else{
					if(jtfPrint.getText().equals("0")){
						StrValue2 = "";
					}
					StrValue2 += "8";
					jtfPrint.setText(StrValue2);
				}
			}
			else if(e.getSource() == jbt9){
				if(bValue1ready==false){
					if(jtfPrint.getText().equals("0")){
						StrValue1 = "";
					}
					StrValue1 += "9";
					jtfPrint.setText(StrValue1);
				}
				else{
					if(jtfPrint.getText().equals("0")){
						StrValue2 = "";
					}
					StrValue2 += "9";
					jtfPrint.setText(StrValue2);
				}
			}
			else if(e.getSource() == jbt0){
				if(bValue1ready==false){
					if(jtfPrint.getText().equals("0")){
						StrValue1 = "";
					}
					StrValue1 += "0";
					jtfPrint.setText(StrValue1);
				}
				else{
					if(jtfPrint.getText().equals("0")){
						StrValue2 = "";
					}
					StrValue2 += "0";
					jtfPrint.setText(StrValue2);
				}
			}
			else if(e.getSource() == jbtPoint){
				if(bValue1ready==false){
					if(jtfPrint.getText().equals("0")){
						StrValue1 = "";
					}
					StrValue1 += ".";
					jtfPrint.setText(StrValue1);
				}
				else{
					if(jtfPrint.getText().equals("0")){
						StrValue2 = "";
					}
					StrValue2 += ".";
					jtfPrint.setText(StrValue2);
				}
			}
			else if(e.getSource() == jbtPlus){
				if(iOperation==0){
					dbValue1 = Double.parseDouble(StrValue1);
					iOperation=1;
					bValue1ready = true;
				}
				else
					System.out.println("Double press PLUS");
			}
			else if(e.getSource() == jbtMinus){
				if(iOperation==0){
					dbValue1 = Double.parseDouble(StrValue1);
					iOperation=2;
					bValue1ready = true;
				}
				else
					System.out.println("Double press MINUS");
			}
			else if(e.getSource() == jbtMultiple){
				if(iOperation==0){
					dbValue1 = Double.parseDouble(StrValue1);
					iOperation=3;
					bValue1ready = true;
				}
				else
					System.out.println("Double press MULTIPLE");
			}
			else if(e.getSource() == jbtDevide){
				if(iOperation==0){
					dbValue1 = Double.parseDouble(StrValue1);
					iOperation=4;
					bValue1ready = true;
				}
				else
					System.out.println("Double press DEVIDE");
			}
			else if(e.getSource() == jbtEqual){
				if(StrValue2!="")
				{
					bValue2ready=true;
					if(bValue1ready==true){
						dbValue2=Double.valueOf(StrValue2);
						switch(iOperation)
						{
							case 1:
								dbResult=dbValue1+dbValue2;
								break;
							case 2:
								dbResult=dbValue1-dbValue2;
								break;
							case 3:
								dbResult=dbValue1*dbValue2;
								break;
							case 4:
								dbResult=dbValue1/dbValue2;
								break;
						}
						StrResult=String.format("%1$.02f", dbResult);
						jtfPrint.setText(StrResult);
						StrValue1=StrResult;
						dbValue1=dbResult;
						StrValue2="";
						iOperation=0;
					}
				}
				else
					System.out.println("Failed in double press EQUAL Button");
			}
		}
}



public static void main(String[] args){
	System.out.println("Main Entry ..");

	Password frame = new Password();
	frame.setSize(250, 150);
	frame.setTitle("CALCULATOR");
	frame.setLocationRelativeTo(null); // Center the frame
	frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
	   frame.setVisible(true);
	}
}

class Password extends JFrame{
		//Create a frame of calculator
		Calculator cframe = new Calculator();
		//Create the labels, text fields, buttons 
		private JLabel jlEnter = new JLabel("Password");
		private JPasswordField jtfPassword = new JPasswordField();
		private JButton jbtEnter  = new JButton("Sign in");
		private JLabel jlWrong = new JLabel();
		//The constructor of password
		public Password(){
			//Add panels 
			JPanel p4 = new JPanel(new GridLayout(2,3));
			p4.add(jlEnter);
			p4.add(jtfPassword);
			JPanel p5 = new JPanel(new FlowLayout(FlowLayout.CENTER));
			p5.add(jbtEnter);
			JPanel p6 = new JPanel(new FlowLayout(FlowLayout.CENTER));
			p6.add(jlWrong);
			add(p4,BorderLayout.NORTH);
			add(p5,BorderLayout.CENTER);
			add(p6,BorderLayout.SOUTH);
			////Register listener
			jbtEnter.addActionListener(new ButtonListener());
		}
		//Set the password
		String password = "0000";
		//Handle the button
		private class ButtonListener implements ActionListener{
			public void actionPerformed(ActionEvent e){
				//Judge the password
				if(String.valueOf(jtfPassword.getPassword()).equals(password)){
					//Set the size
					cframe.setSize(250,300);
					//Set title
					cframe.setTitle("Calculator");
					////Center a frame
					cframe.setLocationRelativeTo(null);
					cframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
					cframe.setVisible(true);
				}
				else{
					//Ask user enter the password again
					jlWrong.setText("Please enter your password again");
				}
			}
		}
	}

